---
import Button from '../ui/Button.astro';
import Container from '../ui/Container.astro';
import type { Locale } from '../../i18n/config';

interface Props {
  nav: { label: string; href: string }[];
  locale: Locale;
  languageSwitcher: {
    current: Locale;
    options: { label: string; value: Locale; href: string }[];
  };
  contactCta: string;
}

const { nav, locale, languageSwitcher, contactCta } = Astro.props satisfies Props;
---

<header class="fixed inset-x-0 top-0 z-50 border-b border-ocean-100/40 bg-white/90 backdrop-blur">
  <Container class="flex h-20 items-center gap-6">
    <a href={`/${locale}`} class="flex items-center gap-3 text-deep transition hover:opacity-90">
      <div class="flex h-9 w-9 items-center justify-center rounded-full bg-ocean-500 font-display text-base font-semibold text-white">
        BH
      </div>
      <div class="leading-tight">
        <p class="font-display text-lg font-semibold">BlueHorizon</p>
        <p class="text-xs uppercase tracking-[0.2em] text-deep/50">Maritime</p>
      </div>
    </a>
    <nav class="hidden flex-1 items-center justify-center gap-6 text-sm font-medium text-deep/70 md:flex">
      {nav.map((item) => (
        <a
          class="rounded-full px-3 py-2 transition-colors hover:bg-ocean-50 hover:text-ocean-600"
          href={item.href}
        >
          {item.label}
        </a>
      ))}
    </nav>
    <div class="ml-auto hidden items-center gap-3 md:flex">
      <div class="flex items-center gap-1 rounded-full border border-ocean-100 bg-white px-2 py-1 text-xs font-medium text-deep/60 shadow-sm">
        {languageSwitcher.options.map((option) => (
          <a
            class={`rounded-full px-2.5 py-1 transition ${
              option.value === languageSwitcher.current
                ? 'bg-ocean-50 text-ocean-600'
                : 'hover:bg-ocean-50 hover:text-ocean-600'
            }`}
            href={option.href}
          >
            {option.label}
          </a>
        ))}
      </div>
      <Button variant="primary" size="md" href="#contact">
        {contactCta}
      </Button>
    </div>
    <details class="relative ml-auto flex md:hidden">
      <summary class="flex list-none cursor-pointer items-center gap-2 rounded-full border border-ocean-100 bg-white px-4 py-2 text-xs font-semibold text-deep/70 shadow-sm">
        Menu
      </summary>
      <div class="absolute right-0 top-14 min-w-[240px] space-y-4 rounded-3xl border border-ocean-100 bg-white p-5 shadow-lg">
        <nav class="space-y-2 text-sm font-medium text-deep/80">
          {nav.map((item) => (
            <a class="block rounded-xl px-3 py-2 transition hover:bg-ocean-50 hover:text-ocean-600" href={item.href}>
              {item.label}
            </a>
          ))}
        </nav>
        <div class="flex items-center justify-between rounded-xl border border-ocean-100 p-2">
          {languageSwitcher.options.map((option) => (
            <a
              class={`flex-1 rounded-lg px-3 py-2 text-center text-xs font-medium ${
                option.value === languageSwitcher.current
                  ? 'bg-ocean-50 text-ocean-600'
                  : 'text-deep/70 hover:bg-ocean-50 hover:text-ocean-600'
              }`}
              href={option.href}
            >
              {option.label}
            </a>
          ))}
        </div>
        <Button variant="primary" size="lg" href="#contact" class="w-full justify-center">
          {contactCta}
        </Button>
      </div>
    </details>
  </Container>
</header>
